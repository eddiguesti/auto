# ===========================================
# Easy Memoir - Environment Configuration
# ===========================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!
# ===========================================
# Legend:
#   [REQUIRED] - Server will not start without this
#   [OPTIONAL] - Has a sensible default or enables optional feature
#   [SECRET]   - Contains sensitive data, never expose to client
# ===========================================

# -------------------------------------------
# Server Configuration [OPTIONAL]
# -------------------------------------------
PORT=3001
NODE_ENV=development
APP_URL=http://localhost:3001

# -------------------------------------------
# Database [REQUIRED] [SECRET]
# -------------------------------------------
# PostgreSQL connection string (Supabase, Neon, etc.)
DATABASE_URL=postgresql://user:password@host:5432/database

# Connection pool settings [OPTIONAL]
DATABASE_POOL_MAX=20
DATABASE_POOL_MIN=2
DATABASE_IDLE_TIMEOUT=30000
DATABASE_CONNECTION_TIMEOUT=10000

# SSL verification (set to false only if using self-signed certs locally)
DATABASE_SSL_REJECT_UNAUTHORIZED=true

# -------------------------------------------
# Authentication [REQUIRED] [SECRET]
# -------------------------------------------
# JWT secret - minimum 32 characters
# Generate with: openssl rand -base64 64
JWT_SECRET=CHANGE_ME_generate_a_secure_random_string_at_least_64_characters
JWT_EXPIRES_IN=7d

# Google OAuth credentials
GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret

# -------------------------------------------
# Stripe Payments [OPTIONAL] [SECRET]
# -------------------------------------------
# Required only if using payment features
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret

# -------------------------------------------
# AI Services [OPTIONAL] [SECRET]
# -------------------------------------------
# xAI Grok - for AI features and voice
GROK_API_KEY=your_xai_grok_api_key

# Replicate - for image generation
REPLICATE_API_TOKEN=your_replicate_token

# -------------------------------------------
# Voice Services [OPTIONAL] [SECRET]
# -------------------------------------------
# Fish.audio - for text-to-speech
FISH_AUDIO_API_KEY=your_fish_audio_key

# -------------------------------------------
# Print on Demand [OPTIONAL] [SECRET]
# -------------------------------------------
# Lulu - for physical book printing
LULU_CLIENT_KEY=your_lulu_client_key
LULU_CLIENT_SECRET=your_lulu_client_secret
LULU_SANDBOX=true

# -------------------------------------------
# Email Service [OPTIONAL] [SECRET]
# -------------------------------------------
# Resend - for transactional emails (password reset, welcome, etc.)
# Sign up at https://resend.com and get your API key
RESEND_API_KEY=re_your_resend_api_key

# From address for emails (must be verified in Resend)
EMAIL_FROM=Easy Memoir <hello@easymemoir.co.uk>

# -------------------------------------------
# Telegram Bot [OPTIONAL] [SECRET]
# -------------------------------------------
# For support chat integration
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_telegram_chat_id
TELEGRAM_WEBHOOK_SECRET=your_telegram_webhook_secret

# -------------------------------------------
# Logging [OPTIONAL]
# -------------------------------------------
# Log level: error, warn, info, debug
LOG_LEVEL=debug

# -------------------------------------------
# Rate Limiting [OPTIONAL]
# -------------------------------------------
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=500
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX=10

# -------------------------------------------
# Development Only [OPTIONAL]
# -------------------------------------------
# WARNING: Never enable in production!
# Bypasses authentication for local testing
DEV_BYPASS=false
